/*!
 * mpapi
 * version: 0.1.3
 * address: https://github.com/ChanceYu/mpapi#readme
 * description: 小程序API兼容插件，一次编写，多端运行。支持：微信小程序、支付宝小程序、百度智能小程序
 * author:  ChanceYu
 * license: MIT
 */
!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("mpApi",[],factory):"object"==typeof exports?exports.mpApi=factory():root.mpApi=factory()}("undefined"!=typeof self?self:this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _addMethod(methods){var _this=this;Object.assign(this,methods);for(var attr in $global){(function(attr){if(_this.hasOwnProperty(attr))return"continue";"function"==typeof $global[attr]?_this[attr]=function(){var type=_toString.call(arguments.length<=0?void 0:arguments[0]);return"[object Undefined]"!==type&&"[object Object]"!==type||-1!==_nocallback2.default.indexOf(attr)?$global[attr].apply($global,arguments):_Promised(attr,arguments.length<=0?void 0:arguments[0])}:_this[attr]=$global[attr]})(attr)}}function _Promised(method){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},onResolve=arguments[2],onReject=arguments[3],oEvent=new _event2.default,defer=new Promise(function(resolve,reject){var _success=opts.success,_fail=opts.fail;if(opts.success=function(res){onResolve&&onResolve(res),_success&&_success(res),resolve(res)},opts.fail=function(res){onReject&&onReject(res),_fail&&_fail(res),reject(res)},"function"==typeof $global[method]){var source=$global[method](opts);oEvent.trigger(source)}});return defer.__proto__.$event=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return oEvent.fire.apply(oEvent,args)},defer.__proto__.$get=function(){return oEvent.source},defer}var _nocallback=__webpack_require__(2),_nocallback2=_interopRequireDefault(_nocallback),_event=__webpack_require__(3),_event2=_interopRequireDefault(_event),isWechat="undefined"!=typeof wx&&"function"==typeof wx.showToast,isAlipay="undefined"!=typeof my&&"function"==typeof my.showToast,isSwan="undefined"!=typeof swan&&"function"==typeof swan.showToast,$global=isWechat?wx:isAlipay?my:swan,_toString=Object.prototype.toString;module.exports={isWechat:isWechat,isAlipay:isAlipay,isSwan:isSwan,$global:$global,_addMethod:_addMethod,_Promised:_Promised}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _api=__webpack_require__(0),_api2=_interopRequireDefault(_api),_alert=__webpack_require__(4),_alert2=_interopRequireDefault(_alert),_confirm=__webpack_require__(5),_confirm2=_interopRequireDefault(_confirm),_showActionSheet=__webpack_require__(6),_showActionSheet2=_interopRequireDefault(_showActionSheet),_showLoading=__webpack_require__(7),_showLoading2=_interopRequireDefault(_showLoading),_showToast=__webpack_require__(8),_showToast2=_interopRequireDefault(_showToast),_getFileInfo=__webpack_require__(9),_getFileInfo2=_interopRequireDefault(_getFileInfo),_getSavedFileInfo=__webpack_require__(10),_getSavedFileInfo2=_interopRequireDefault(_getSavedFileInfo),_getSavedFileList=__webpack_require__(11),_getSavedFileList2=_interopRequireDefault(_getSavedFileList),_removeSavedFile=__webpack_require__(12),_removeSavedFile2=_interopRequireDefault(_removeSavedFile),_saveFile=__webpack_require__(13),_saveFile2=_interopRequireDefault(_saveFile),_chooseImage=__webpack_require__(14),_chooseImage2=_interopRequireDefault(_chooseImage),_getImageInfo=__webpack_require__(15),_getImageInfo2=_interopRequireDefault(_getImageInfo),_previewImage=__webpack_require__(16),_previewImage2=_interopRequireDefault(_previewImage),_downloadFile=__webpack_require__(17),_downloadFile2=_interopRequireDefault(_downloadFile),_request=__webpack_require__(18),_request2=_interopRequireDefault(_request),_uploadFile=__webpack_require__(19),_uploadFile2=_interopRequireDefault(_uploadFile),_clearStorage=__webpack_require__(20),_clearStorage2=_interopRequireDefault(_clearStorage),_clearStorageSync=__webpack_require__(21),_clearStorageSync2=_interopRequireDefault(_clearStorageSync),_getStorage=__webpack_require__(22),_getStorage2=_interopRequireDefault(_getStorage),_getStorageSync=__webpack_require__(23),_getStorageSync2=_interopRequireDefault(_getStorageSync),_getStorageInfo=__webpack_require__(24),_getStorageInfo2=_interopRequireDefault(_getStorageInfo),_getStorageInfoSync=__webpack_require__(25),_getStorageInfoSync2=_interopRequireDefault(_getStorageInfoSync),_removeStorage=__webpack_require__(26),_removeStorage2=_interopRequireDefault(_removeStorage),_removeStorageSync=__webpack_require__(27),_removeStorageSync2=_interopRequireDefault(_removeStorageSync),_setStorage=__webpack_require__(28),_setStorage2=_interopRequireDefault(_setStorage),_setStorageSync=__webpack_require__(29),_setStorageSync2=_interopRequireDefault(_setStorageSync);_api2.default._addMethod({alert:_alert2.default,confirm:_confirm2.default,showActionSheet:_showActionSheet2.default,showLoading:_showLoading2.default,showToast:_showToast2.default,getFileInfo:_getFileInfo2.default,getSavedFileInfo:_getSavedFileInfo2.default,getSavedFileList:_getSavedFileList2.default,removeSavedFile:_removeSavedFile2.default,saveFile:_saveFile2.default,chooseImage:_chooseImage2.default,getImageInfo:_getImageInfo2.default,previewImage:_previewImage2.default,downloadFile:_downloadFile2.default,request:_request2.default,uploadFile:_uploadFile2.default,clearStorage:_clearStorage2.default,clearStorageSync:_clearStorageSync2.default,getStorage:_getStorage2.default,getStorageSync:_getStorageSync2.default,getStorageInfo:_getStorageInfo2.default,getStorageInfoSync:_getStorageInfoSync2.default,removeStorage:_removeStorage2.default,removeStorageSync:_removeStorageSync2.default,setStorage:_setStorage2.default,setStorageSync:_setStorageSync2.default}),module.exports=_api2.default},function(module,exports,__webpack_require__){"use strict";module.exports=["createInnerAudioContext","getRecorderManager","getBackgroundAudioManager","createCameraContext","createLivePusherContext","getFileSystemManager","getBatteryInfoSync","getMenuButtonBoundingClientRect","createAnimation","getUpdateManager","createIntersectionObserver","createSelectorQuery","getSystemInfoSync","getExtConfigSync","getLogManager"]},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Event=function(){function Event(){_classCallCheck(this,Event),this.listeners=[]}return _createClass(Event,[{key:"fire",value:function(name){for(var _len=arguments.length,value=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)value[_key-1]=arguments[_key];this.listeners.push({name:name,value:value}),this.trigger()}},{key:"trigger",value:function(s){s&&(this.source=s);var source=this.source;if(source)for(;this.listeners.length;){var event=this.listeners.shift(),name=event.name,value=event.value;"function"==typeof source[name]&&source[name].apply(source,_toConsumableArray(value))}}}]),Event}();module.exports=Event},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={title:"",showCancel:!1,confirmText:"确定"};module.exports=function(opts){return"string"==typeof opts&&(opts={content:opts}),opts=Object.assign({},defaults,opts),_api.isAlipay&&(opts.buttonText=opts.confirmText),(0,_api._Promised)(_api.isAlipay?"alert":"showModal",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={title:"提示",showCancel:!0,confirmText:"确定",cancelText:"取消"};module.exports=function(opts){return"string"==typeof opts&&(opts={content:opts}),opts=Object.assign({},defaults,opts),_api.isAlipay&&(opts.confirmButtonText=opts.confirmText,opts.cancelButtonText=opts.cancelText),(0,_api._Promised)(_api.isAlipay?"confirm":"showModal",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={itemList:[]};module.exports=function(opts){return opts=Object.assign({},defaults,opts),_api.isAlipay&&(opts.items=opts.itemList),(0,_api._Promised)("showActionSheet",opts,function(res){_api.isAlipay&&(res.tapIndex=res.index)})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={title:"加载中",mask:!0};module.exports=function(opts){return"string"==typeof opts&&(opts={title:opts}),opts=Object.assign({},defaults,opts),_api.isAlipay&&(opts.content=opts.title),(0,_api._Promised)("showLoading",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={title:"",icon:"none"};module.exports=function(opts){return"string"==typeof opts&&(opts={title:opts}),opts=Object.assign({},defaults,opts),_api.isAlipay&&(opts.content=opts.title,opts.type=opts.icon),(0,_api._Promised)("showToast",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay&&(opts.apFilePath=opts.filePath),(0,_api._Promised)("getFileInfo",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay&&(opts.apFilePath=opts.filePath),(0,_api._Promised)("getSavedFileInfo",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("getSavedFileList",opts,function(res){var fileList=res.fileList||[];_api.isAlipay&&fileList.map(function(item){return item.filePath=item.apFilePath,item})})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay&&(opts.apFilePath=opts.filePath),(0,_api._Promised)("removeSavedFile",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay&&(opts.apFilePath=opts.tempFilePath),(0,_api._Promised)("saveFile",opts,function(res){_api.isAlipay&&(res.savedFilePath=res.apFilePath)})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0),defaults={count:1};module.exports=function(opts){return opts=Object.assign({},defaults,opts),(0,_api._Promised)("chooseImage",opts,function(res){_api.isAlipay&&(res.tempFilePaths=res.apFilePaths)})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("getImageInfo",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){var current=opts.current,urls=opts.urls||[];return _api.isAlipay||"number"!=typeof current||(current=urls[0]),_api.isAlipay&&"string"==typeof current&&-1===(current=urls.indexOf(current))&&(current=0),void 0!==current&&(opts.current=current),(0,_api._Promised)("previewImage",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("downloadFile",opts,function(res){_api.isAlipay&&(res.tempFilePath=res.apFilePath)})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay&&(opts.headers=opts.header),(0,_api._Promised)(_api.isAlipay?"httpRequest":"request",opts,function(res){_api.isAlipay&&(res.statusCode=res.status,res.header=res.headers)})}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return _api.isAlipay?opts.fileName=opts.name:opts.name=opts.fileName,(0,_api._Promised)("uploadFile",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("clearStorage",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(){try{_api.$global.clearStorageSync()}catch(e){}}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("getStorage",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){"string"==typeof opts&&(opts={key:opts});try{if(_api.isAlipay){return(_api.$global.getStorageSync(opts)||{}).data}return _api.$global.getStorageSync(opts.key)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("getStorageInfo",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(){try{return _api.$global.getStorageInfoSync()}catch(e){}}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("removeStorage",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){"string"==typeof opts&&(opts={key:opts});try{_api.isAlipay?_api.$global.removeStorageSync(opts):_api.$global.removeStorageSync(opts.key)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts){return(0,_api._Promised)("setStorage",opts)}},function(module,exports,__webpack_require__){"use strict";var _api=__webpack_require__(0);module.exports=function(opts,data){"string"==typeof opts&&(opts={key:opts,data:data});try{_api.isAlipay?_api.$global.setStorageSync(opts):_api.$global.setStorageSync(opts.key,opts.data)}catch(e){}}}])});